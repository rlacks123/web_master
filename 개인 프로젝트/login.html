<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 페이지</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</head>

<body>
    <div id="container">
        <table class="table">
            <tr>
                <th>아이디</th>
                <td><input type="text" name="uid" id="uid" class="form-control"</td>
            </tr>
            <tr>
                <th>비밀번호</th>
                <td><input type="password" name="upw" id="upw" class="form-control"</td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <button class="btn btn-primary">로그인</button>
                </td>
            </tr>
        </table>
    </div>
    <script>
        const memberData = JSON.parse(localStorage.getItem('memberData')) // 문자열 반환
        //로그인 이벤트
        document.querySelector('button.btn-primary').addEventListener('click', (e) => {
        // 로그인 성공하면 welcome페이지로 이동. 입력 정보를 확인 후 재로그인.
        let id= document.querySelector('#uid').value;
        let pw= document.querySelector('#upw').value;
        
        let loginInfo = memberData.filter(member => member.id == id && member.pw == pw);
        if (loginInfo.length) { // id, pw 동일한 정보가 있는다는 의미.
            localStorage.setItem('logId',id); // 이 아이디로 저장함
            localStorage.setItem('logName', loginInfo[0].name); // 로그인 정보 0번 네임은 콘솔 찍으면 0나옴
            location.href = 'welcome.html';
            console.log(loginInfo); // 콘솔 확인 하려면 위에 주석하고
        } else {
            alert ('입력정보를 확인하세요');
        }
        })
    </script>
    
</body>

</html>